    # rem_flutter_webapp

## ⚠️Notes

- This project will first be released on the web, but will also be released on mobile in the future.
  Therefore, while developing the web version, please make sure that the mobile version will work as well.
- Please write your comments in English.
- Since `html` is a more lightweight rendering method than `canvaskit`, `html` is assumed to be used.
- i18n is used for the purpose of facilitating development. Since the text will be displayed in Japanese in production, please be sure to check that the wording in Japanese is correct.

## Setup

### Flutter version management

[FVM](https://fvm.app/) is used for Flutter version management.

The version used is written in the file `.fvmrc`.

Use of fvm is recommended to prevent Flutter version inconsistencies.

## git clone

1. rem_flutter_webapp の git clone
   ```
   git clone https://github.com/10kn/rem_flutter_webapp.git
   ```

### git コミット便利ツールのインストール（optional）

- node をローカルにインストールしている人向け  
  `npm install -g git-cz` コマンドで [git-cz](https://github.com/streamich/git-cz#install-globally-standalone) をインストール。  
  変更をステージングに上げて `git cz` コマンドを実行すると、いい感じのコミット用のプロンプトが出てくる。

- nodenv を使用する人向け(node はとりあえず最新の 19.3.0 にしました)  
  `npm install` コマンドを実行  
  変更をステージングに上げて `npx git-cz` コマンドを実行すると、いい感じのコミット用のプロンプトが出てくる。
  
## 管理者アカウントの作成

```
curl \
    --header 'Content-Type: application/json' \
    --data '{"key": "c8Wa7gLH4MaM", "email": "test@gmail.com", "password": "12345678"}' \
    http://localhost:8080/auth.v1.AuthService/AdminSignUp
```

## How to Run

Run it with a command like the following.

### html

```
flutter run -d chrome --web-renderer html --dart-define=FLAVOR=dev --dart-define=WEB_RENDERER=html
```

### canvaskit

```
flutter run -d chrome --web-renderer canvaskit --dart-define=FLAVOR=dev --dart-define=WEB_RENDERER=canvaskit
```

## Generate codes

When generating models with freezed, changing routing with go_router, generating providers with riverpod, changing i18n with slang, etc., the following commands generate code.

### build

```
flutter pub run build_runner build --delete-conflicting-outputs
```

### watch

```
flutter pub run build_runner watch --delete-conflicting-outputs
```

### Generate i18n

Note: If `strings.g.dart` is not generated by the `build` or `watch` command, use the following command instead.

```
flutter pub run slang
```

## Generate splash screens

```
flutter pub run flutter_native_splash:create
```

## Generate launcher icons

```
flutter pub run flutter_launcher_icons
```

---

## Architecture

Feature-first is used for the architecture.

https://codewithandrea.com/articles/flutter-project-structure/

![Architecture Diagram](https://codewithandrea.com/articles/flutter-project-structure/images/flutter-app-architecture.webp)

## State management

Riverpod is used for state management.

## Localization

## Hosting

Firebase Hosting is used for Hosting.

<!-- TODO: Changing the domain name after each project's own domain has been obtained. -->

- The domain used as develop is https://smoooz-dev.web.app/#/.
- The domain used as staging is https://stg.smoooz.net/.
- The domain used as production is https://smoooz.net/.

## CI/CD

GitHub Actions are used for CI/CD.

<!-- TODO: Changing the domain name after each project's own domain has been obtained. -->

- Deployed to `https://smoooz-dev.web.app/#/` when merged into the develop branch.
- Deployed to `https://stg.smoooz.net/` when merged into the staging branch.
- Deployed to `https://smoooz.net/` when merged into the main branch.
